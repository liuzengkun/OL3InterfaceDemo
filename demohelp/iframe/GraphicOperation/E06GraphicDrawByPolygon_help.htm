<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
    <title>坐标添加多边形</title>
    <link href="../../css/helpstyle.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="biaoti">
        坐标添加多边形
    </div>
    <div class="xiaobiaoti">
        一、示例功能
    </div>
    <div class="zhengwen">
        该示例实现向OSM世界地图添加指定多边形的功能。
    </div>
    <div class="xiaobiaoti">
        二、实现说明:
    </div>
    <div class="zhengwen">
        1、数据：使用一个OSM的世界地图。<br />
        <br />
        2、实现步骤：
        <br />
        <br />
        [地图显示]<br />
        <br />
        （1）先引入ol.js（ol是一个专为WebGIS客户端开发提供的JavaScript 类库包，用于实现标准格式发布的地图数据访问。OpenLayers 3对OpenLayers网络地图库进行了根本的重新设计。openlayer2虽然被广泛使用，但从JavaScript开发的早期发展阶段开始，已日益显示出它的落后。
        OL3已运用现代的设计模式从底层重写。）、ol.css（是地图样式文件，包含了地图样式的方方面面，例如，填充色、图标样式、图片样式、规则图形样式、边界样式、文字样式等，样式一般针对矢量要素图层。）；
        <br />
        <br />
        （2）再创建一个ID为“mapCon”的div层，并设置其样式；
        <br />
        <br />
        （3）然后在body标签里面编写地图显示的脚本，即创建ol.Map类。通过设置该类的layers属性加载一张OSM的瓦片地图，再通过设置该类的view属性确定地图的显示中心和级别；
        <br />
        <br />
        [创建要素]<br />
        <br />
        （4）创建一个多边形要素（ol.Feature），通过ol.geom.Polygon类去描述多边形形状的几何信息；
        <br />
        <br />
        （5）设置当前多边形要素的样式信息（ol.style.Style）；
        <br />
        <br />
        [添加要素]<br />
        <br />
        （6）初始化ol.source.Vector类，创建一个要素源的向量层，并添加多边形要素；
        <br />
        <br />
        （7）初始化ol.layer.Vector类，创建一个用于存放绘制的几何实体的图层，将矢量多边形要素添加到矢量图层Vector对象中；
        <br />
        <br />
        （8）最后调用Map对象类的addLayer方法执行添加绘制层功能。
        <br />
        <br />
        [添加控件]<br />
        <br />
        （9）设置ol.Map()类的controls属性给地图容器添加相应的控件。
    </div>
    <div class="xiaobiaoti">
        三、功能类/参数说明
    </div>
    <div class="zhengwen">
        <font class="Class">1、ol.Map类：</font>该类是一个地图容器类<br />
        <br />
        <font class="constructorTile">1.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.Map(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】target：</font>（Element|string|undefined类型）可选项，指定地图所在的网页div元素的id，例如代码中的'mapCon'（如果在构建时未指定，则必须调用ol.Map中setTarget方法以便绘制地图）。<br />
            <font class="nextParameter">【2】layers：</font>（Array类型-[ol.layer.Base]|ol.Collection[ol.layer.Base|undefined类型]）可选项，指定加载的图层。如果未定义，则将呈现不包含图层的地图（图层是按提供的顺序呈现的，如果想要矢量图层显示在瓦片图层顶部，则必须位于瓦片图层之后）。<br />
            <font class="nextParameter">【3】view：</font>（ol.View|undefined类型）可选项，设置地图显示视图（如果在构建时未指定，则必须通过ol.Map中的setView方法指定，否则不会提取图层源）。<br />
            <font class="nextParameter">【4】controls：</font>（ol.Collection.[ol.control.Control]|Array类型-[ol.control.Control]|undefined类型）可选项，添加地图控件（如果在构建时未指定，则调用ol.control.defaults()方法）。<br />
        </div>
        <font class="funDescription">1.2方法说明：</font>
        <br />
    <div class="zhuji">
        <font class="functionName">addLayer(layer)：</font>添加单个图层到地图容器中。详细参数介绍如下：<br/>
        <font class="nextParameter">layer：</font>继承于ol.layer.Base的图层对象<br/>
    </div>
        <font class="Class">2、ol.layer.Tile类：</font>该类是一个瓦片图层类，用于显示瓦片资源。这些瓦片提供了预渲染，并且由特定分辨率的缩放级别组织的瓦片图片网格组成。<br />
        <br />
        <font class="constructorTile">2.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.layer.Tile(options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">options：</font>（object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】source：</font>（ol.source.Tile）必填项。为图层设置来源、服务地址。<br />
        </div>
        <font class="Class">3、ol.source.OSM类：</font>OpenStreetMap瓦片图层资源。<br />
        <br />
        <font class="constructorTile">3.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.source.OSM(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（object类型）可选项，设置该图层的配置选项，以键值对的形式设置。<br />
            <font class="nextParameter">【1】cacheSize：</font>（number|undefined）可选项，设置缓存大小。<br />默认是2048。<br />
            <font class="nextParameter">【2】crossOrigin：</font>（null|string|undefined）可选项，设置加载瓦片的跨域属性。<br />默认是匿名的。<br />
            <font class="nextParameter">【3】maxZoom：</font>（number|undefined）可选项，设置最大放大级别。<br />默认是19。<br />
            <font class="nextParameter">【4】opaque：</font>（boolean|undefined）可选项，设置图层是否是不透明的。<br />默认是true。<br />
            <font class="nextParameter">【5】reprojectionErrorThreshold：</font>（number|undefined）可选项，设置重投影允许的最大误差（以像素为单位）。设置值越大，精度越低。<br />默认是0.5。<br />
            <font class="nextParameter">【6】tileLoadFunction：</font>（ol.TileLoadFunctionType|undefined  ）可选项，设置通过给定的URL加载瓦片的功能。<br />默认是function(imageTile, src) {imageTile.getImage().src = src; };<br />
            <font class="nextParameter">【7】url：</font>（string|undefined）可选项，设置url模板。<br />默认为https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png。<br />
            <font class="nextParameter">【8】wrapX：</font>（boolean|undefined）可选项，设置是否在地图水平坐标轴上重复。<br />默认是true。
        </div>
        <font class="Class">4、ol.View类：</font>该类是一个地图显示视图类<br />
        <br />
        <font class="constructorTile">4.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.View(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】center：</font>（ol.Coordinate|undefined）可选项，设置地图显示中心；<br />
            <font class="nextParameter">【2】zoom：</font>（number|undefined）可选项，设置地图的显示级数。<br />
            <font class="nextParameter">【3】minZoom：</font>（number|undefined）可选项，设置地图最小缩放级别，它与maxZoom(或minResolution)和zoomFactor一起使用，如果同时给出maxResolution,maxResolution优先级高于minZoom。<br />默认值为0。<br />
            <font class="nextParameter">【4】maxZoom：</font>（number|undefined）可选项，设置地图最大缩放级别，它与minZoom(或maxResolution)和zoomFactor一起使用，如果同时给出minResolution,minResolution优先级高于maxZoom。<br />默认值为28。<br />
            <font class="nextParameter">【5】rotation：</font>（number|undefined）可选项，设置初始视图的旋转弧度（顺时针方向)。<br />默认值为0。
        </div>
        <font class="Class">5、ol.Control类：</font>该类是一个地图控件基类<br />
        <br />
        <font class="constructorTile">5.1 方法说明：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.control.defaults(opt_options)：</font>该方法表示地图默认包含的一组控件。除非另外配置，否则将返回一组默认的地图控件，分别是：ol.control.Zoom,ol.control.Rotate,ol.control.Attribution。返回值为{ol.Collection[ol.control.control]类}<br />
            <br />
            <font class="paraDescription">方法参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】attributionOptions：</font>(olx.control.AttributionOptions|undefined)设置属性控件的相关属性，例如：collapsible: false。<br />
            <font class="nextParameter">【2】zoom：</font>（number|undefined类型）可选项，设置地图初始的缩放级别(如果在构建时未指定，则必须通过ol.View中constrainResolution方法确定初始分辨率)，例如：2。<br />
        </div>
        <font class="Class">6、ol.Collection类：</font>该类是一个标准扩展JS数组类<br />
        <br />
        <font class="constructorTile">6.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.Collection(opt_array)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_array：</font>（Array类型）数组<br />
        </div>
        <font class="funDescription">6.2方法说明：</font>
        <br />
        <div class="zhuji">
            <font class="functionName">extend(arr)：</font>该方法实现将要素添加到集合中<br />
            <font class="nextParameter">arr：</font>(Array类型）将要添加进集合的数组。例如代码中的[ol.control.MousePosition()]。<br />
        </div>
        <font class="Class">7、ol.control.MousePosition类：</font>该类是控制显示鼠标光标的坐标<br />
        <br />
        <font class="constructorTile">7.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.control.MousePosition(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】coordinateFormat：</font>（ol.CoordinateFormatType|undefined）可选项，设置坐标格式。<br />
            <font class="nextParameter">【2】projection：</font>（ol.ProjectionLike）可选项，设置投影信息。<br />默认是地图本身投影。<br />
            <font class="nextParameter">【3】className：</font>（string|undefined）可选项，设置坐标信息样式类名。<br />默认为ol-mouse-position。<br />
            <font class="nextParameter">【4】target：</font>（Element|undefined）可选项，设置显示鼠标位置信息的目标容器。例如代码中：document.getElementById('mouse-position')。<br />
            <font class="nextParameter">【5】undefinedHTML：</font>（string|undefined）可选项，标记未定义坐标。<br />默认为空字符串。<br />
        </div>
        <font class="Class">8、ol.Feature类：</font>该类是设置一个矢量要素的几何属性和其他属性。<br />
        <br />
        <font class="constructorTile">8.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.Feature(opt_geometryOrProperties)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_geometryOrProperties：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】geometry：</font>(ol.geom.Geometry)可选项，指定默认几何特性。<br />
        </div>
        <font class="funDescription">8.2方法说明：</font>
        <br />
        <div class="zhuji">
            <font class="functionName">setStyle(style)：</font>该方法设置要素的类型。<br />
            <font class="nextParameter">style：</font>(ol.style.Style|Array[ol.style.style]|ol.FeatureStyleFunction类型）要素样式<br />
        </div>
        <font class="Class">9、ol.geom.Polygon类：</font>该类是设置一个多边形几何体类<br />
        <br />
        <font class="constructorTile">9.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.geom.Polygon(coordinates, opt_layout)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">coordinates：</font>（Array类型-[ol.Coordinate]）可选项，定义多边形的坐标。<br />
            <font class="parameter">opt_layout：</font>（ol.geom.GeometryLayout类型）可选项，设置布局。<br />
        </div>
        <font class="Class">10、ol.style.Style类：</font>控制地图样式，其包含了地图样式的方方面面，例如，填充色、图标样式、图片样式、规则图形样式、边界样式、文字样式等，样式一般针对矢量要素图层。矢量图层样式可以事先写好，写成静态的，矢量图层直接按照定义好的样式渲染，也可以动态使用样式的 set() 方法，但是要注意刷新矢量图层，重新渲染，否则动态样式不生效。<br />
        <br />
        <font class="constructorTile">10.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.style.Style(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】geometry：</font>(string|ol.geom.Geometry|ol.StyleGeometryFunction)可选项，设置要素的属性或者要素或者一个返回地理要素的函数，用来渲染成相应的地理要素。<br />
            <font class="nextParameter">【2】fill：</font>(ol.style.Fill|undefined)可选项，设置矢量要素的填充样式。<br />
            <font class="nextParameter">【3】stroke：</font>(ol.style.Stroke|undefined)可选项，设置矢量要素的边界样式。<br />
            <font class="nextParameter">【4】image：</font>(ol.style.Image|undefined)可选项，设置矢量要素的图片样式。<br />
            <font class="nextParameter">【5】text：</font>(ol.style.Text|undefined)可选项，设置矢量要素的文字样式。<br />
            <font class="nextParameter">【6】zIndex：</font>(number|undefined)可选项，CSS中的zIndex，即叠置的层次，为数字类型。<br />
        </div>
        <font class="Class">11、ol.source.Vector类：</font>该类是设置矢量图层数据来源。<br />
        <br />
        <font class="constructorTile">11.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.source.Vector(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】features：</font>(Array[ol.feature]|ol.Collection[ol.feature]|undefined)可选项，设置要素。<br />
        </div>
        <font class="Class">12、ol.layer.Vector类：</font>该类是一个矢量图层类。<br />
        <br />
        <font class="constructorTile">12.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.layer.Vector(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】source：</font>(ol.source.Vector)可选项，设置要素源。<br />
        </div>
        <font class="Class">13、ol.style.Fill类：</font>该类是设置矢量要素的填充类型。<br />
        <br />
        <font class="constructorTile">13.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.style.Fill(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】color：</font>(ol.Color|ol.ColorLike类型)可选项，设置要素的填充颜色和透明度。格式为 [R, G, B, A]，分别代表 RGB 的三个分量，A 代表 alpha，即透明度（[0, 1] 区间内的值[透明―不透明]）。<br />
        </div>
        <font class="Class">14、ol.style.Stroke类：</font>该类是设置矢量要素的边界样式。<br />
        <br />
        <font class="constructorTile">14.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.style.Stroke(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】color：</font>(ol.Color|ol.ColorLike类型)可选项，设置要素边界的颜色。<br />默认值是null,如果为空，画布渲染器将使用默认的黑色。<br />
            <font class="nextParameter">【2】lineCap：</font>(string|undefined类型)可选项，设置要素边界线端点样式。<br />默认值是round（圆形）（可能取值butt（截头）, round（圆形）或者square（正方形））<br />
            <font class="nextParameter">【3】lineDash：</font>(Array[number]类型)可选项，设置要素虚线样式。<br />默认值是undefined，即是实线。值越大，虚线越稀疏；值越小，虚线越密集。<b>注意：IE10及以下版本不支持此功能。</b><br />
            <font class="nextParameter">【4】lineJoin：</font>(string|undefined类型)可选项，设置边界线连接方式。<br />默认值是round(环形)（可能取值bevel(斜角), round(环形)或者miter（斜接））<br />
            <font class="nextParameter">【5】miterLimit：</font>(number|undefined类型)可选项，设置要素的斜接限制。<br />默认值是10。<br />
            <font class="nextParameter">【6】width：</font>(number|undefined类型)可选项，设置要素边界宽度。<br />
        </div>
        <font class="Class">15、ol.style.Image类：</font>该类是设置矢量要素的图片样式（包含的子类有ol.style.Circle、ol.style.Icon、ol.style.RegularShape）。<br />
        <br />
        <font class="constructorTile">15.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.style.Image(options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】opacity：</font>(number类型)可选项，设置透明度（取值范围0-1完全透明/完全不透明）。<br />
            <font class="nextParameter">【2】rotateWithView：</font>(boolean类型)可选项，设置是否旋转图片。<br />
            <font class="nextParameter">【3】rotation：</font>(number类型)可选项，设置旋转的角度。<br />
            <font class="nextParameter">【4】scale：</font>(number类型)可选项，设置比例尺。<br />
            <font class="nextParameter">【5】snapToPixel：</font>(boolean类型)可选项，设置单个像素是否被拍。<br />
        </div>
        <font class="Class">16、ol.style.Text类：</font>该类是设置矢量要素的文字样式。<br />
        <br />
        <font class="constructorTile">16.1 构造函数：</font>
        <br />
        <div class="zhuji">
            <font class="constructor">ol.style.Text(opt_options)</font><br />
            <br />
            <font class="paraDescription">参数说明：</font>
            <br />
            <font class="parameter">opt_options：</font>（Object类型）可选项，设置该对象其他属性，以键值对的形式设置。<br />
            <font class="nextParameter">【1】font：</font>(string|undefined类型)可选项，设置CSS字体样式。<br />默认是10px，详情请参见:https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font <br />
            <font class="nextParameter">【2】offsetX：</font>(number|undefined类型)可选项，设置水平文本的值。<br />默认是0，用以抵消以像素为单位的值。<br />
            <font class="nextParameter">【3】offsetY：</font>(number|undefined类型)可选项，设置垂直文本的值。<br />默认是0，用以抵消以像素为单位的值。<br />
            <font class="nextParameter">【4】scale：</font>(number|undefined类型)可选项，设置比例尺。<br />
            <font class="nextParameter">【5】rotateWithView：</font>(boolean|undefined类型)可选项，设置是否旋转视图的文本。<br />默认是false。<br />
            <font class="nextParameter">【6】rotation：</font>(number|undefined类型)可选项，设置旋转的弧度(正旋转顺时针)<br />默认值是0。<br />
            <font class="nextParameter">【7】text：</font>(string|undefined类型)可选项，设置文本的内容。<br />
            <font class="nextParameter">【8】textAlign：</font>(string|undefined类型)可选项，设置文本对齐的模式。<br />默认值是'start'(可能取值： 'left', 'right', 'center', 'end' or 'start')<br />
            <font class="nextParameter">【9】textBaseline：</font>(string|undefined类型)可选项，设置文本基线。<br />默认值是'alphabetic'(可能取值：'bottom', 'top', 'middle', 'alphabetic', 'hanging', 'ideographic')<br />
            <font class="nextParameter">【10】fill：</font>(ol.style.Fill|undefined类型)可选项，设置填充风格。<br />如果没有提供，默认的是#333<br />
            <font class="nextParameter">【11】stroke：</font>(ol.style.Stroke|undefined类型)可选项，设置文本边线类型。<br />
        </div>
    </div>
    <p>
        <a href="http://openlayers.org/en/latest/apidoc/" alt="OpenLayers 3 API。"
           target="_blank">注：详细说明请参见OpenLayers3 API手册。</a>
    </p>
</body>
</html>
